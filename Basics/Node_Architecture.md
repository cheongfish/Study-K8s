# Node & Pod

![`K8s Architecture`](./K8s_Architecture.png)
- 쿠버네티스의 노드는 여러 개의 파드를 실행함
  - 노드 1: 파드 1, 2, 3
  - 노드 2: 파드 4, 5, N
- 파드는 하나 이상의 컨테이너를 포함하며, 컨테이너 간 통신이 가능함
  - 파드 2와 5: 하나의 컨테이너만 포함
  - 파드 3: 두 개의 컨테이너를 포함
  - 파드 1: 세 개의 컨테이너를 포함
- 컨테이너는 로컬 호스트와 포트 번호를 통해 쉽게 통신할 수 있음

## 서비스 탐색과 통신
- 파드 간 통신은 네트워크를 통해 이루어짐
- 쿠버네티스는 서비스 탐색 메커니즘을 통해 파드 간 통신을 지원함

## 노드의 구성 요소
- 각 노드에는 도커와 같은 컨테이너 엔진이 설치되어 있음
- 주요 구성 요소:
  - `kubelet`: 파드를 시작하며 마스터 노드와 연결함
  - `kube-proxy`: `iptables`를 사용해 트래픽을 라우팅함
    - 새 파드가 생성될 때 `iptables` 규칙을 업데이트함

## 서비스와 로드 밸런서
- 서비스는 로드 밸런서를 통해 외부 트래픽을 클러스터 내부로 전달함
- AWS의 탄력적 로드 밸런서(ELB)를 예시로 들 수 있음
  - ELB는 클라이언트 트래픽을 노드로 전달함
  - `iptables` 규칙에 따라 트래픽이 올바른 파드로 라우팅됨

## YAML 파일과 사양
- YAML 파일은 컨테이너와 포트를 정의함
- 파드 사양은 파드 내부의 컨테이너를 참조함
  - 단일 컨테이너를 가진 파드와 다중 컨테이너를 가진 파드의 사양을 정의함

# Refernece 
* https://kubernetes.io/docs/concepts/architecture/